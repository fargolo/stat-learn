>map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist(.) %>% sum(.)/(length(arg) - 1)
library(magrittr)
>map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist(.) %>% sum(.)/(length(arg) - 1)
>map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist %>% sum(.)/(length(arg) - 1)
map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist %>% sum(.)/(length(arg) - 1)
library(purrr)
map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist(.) %>% sum(.)/(length(arg) - 1)
map(.f = function(y) (y - mean(arg))^2, .x = c(1,23,4,5)) %>%
unlist(.) %>% sum(.)/(length(c(1,23,4,5)) - 1)
map(.f = function(y) (y - mean(c(1,23,4,5)))^2, .x = c(1,23,4,5)) %>%
unlist(.) %>% sum(.)/(length(c(1,23,4,5)) - 1)
mat_example <- matrix(c(.5,.25,.25,.5,0,.5,.25,.25,.5), nrow=3, byrow=TRUE)
mat_example %*% c(1,0,1)
>library(magrittr)
>library(ggthemes)
>library(ggplot2)
>set.seed(2600)
>n_birds <- 150 # sample_size
>genes_low <- 80 # lower bound on number of genes
>genes <- 100 # upper bound on number of genes
>n_islands <- 4 #samples
>unif_sum <- function(genes){
replicate(n = genes,
expr = runif(100, min=0, max = 1)) %>%
rowSums
}
>generate_pop <- function(n_pop,n_genes){
replicate(n=n_pop,
expr = unif_sum(n_genes) %>% mean)
}
>galapagos_birds <- purrr::map(.f = function(x) generate_pop(n_pop=n_birds,
n_genes = x),
.x = runif(n=n_islands, genes_low, genes) %>% ceiling) %>%
unlist %>% matrix(nrow=n_birds,byrow=F) %>%
data.frame
library(magrittr)
library(ggthemes)
library(ggplot2)
set.seed(2600)
n_birds <- 150 # sample_size
genes_low <- 80 # lower bound on number of genes
genes <- 100 # upper bound on number of genes
n_islands <- 4 #samples
unif_sum <- function(genes){
replicate(n = genes,
expr = runif(100, min=0, max = 1)) %>%
rowSums
}
generate_pop <- function(n_pop,n_genes){
replicate(n=n_pop,
expr = unif_sum(n_genes) %>% mean)
}
galapagos_birds <- purrr::map(.f = function(x) generate_pop(n_pop=n_birds,
n_genes = x),
.x = runif(n=n_islands, genes_low, genes) %>% ceiling) %>%
unlist %>% matrix(nrow=n_birds,byrow=F) %>%
data.frame
library(effetcs)
library(effects)
library(effsize)
install.packages("effsize")
library(effsize)
?cohen.d
cohen.d(galapagos_birds$X1,galapagos_birds$X1)
mean(galapagos_birds$X1)
mean(galapagos_birds$X2)
cohen.d(galapagos_birds$X1,galapagos_birds$X1,pooled=T)
cohen.d(d=galapagos_birds$X1,d=galapagos_birds$X1,pooled=T)
cohen.d(f=galapagos_birds$X1,d=galapagos_birds$X1,pooled=T)
cohen.d(f=galapagos_birds$X1,d=galapagos_birds$X2,pooled=T)
write.csv(galapagos_birds,"data/galapagos_birds.csv")
cohen.d(f=galapagos_birds$X1,d=galapagos_birds$X2,pooled=T)
cohen.d(f=galapagos_birds$X1,d=galapagos_birds$X2)
pt(36.51, df = 29)
pt(-36.51, df = 29)
pt(-36.51, df = 29)
pt(36.51, df = 29)
2.992*8.98755
23-16
2.992*8.988
library(ggplot2)
ggplot()
ggplot()+geom_point(mapping=aes(x=1,y=2))
ggplot()+
geom_point(mapping=aes(x=1,y=2)+
geom_point(mapping=aes(x=2,y=4)
ggplot()+
geom_point(mapping=aes(x=1,y=2))+
geom_point(mapping=aes(x=2,y=4)
ggplot()+
geom_point(mapping=aes(x=1,y=2))+
geom_point(mapping=aes(x=2,y=4))
ggplot()+
geom_point(mapping=aes(x=1,y=2))+
geom_point(mapping=aes(x=2,y=4))+
xlim(0,3)
ggplot()+
geom_point(mapping=aes(x=1,y=2))+
geom_point(mapping=aes(x=2,y=4))+
xlim(0,3)+ylim(0,5)
ggplot()+
geom_point(mapping=aes(x=1,y=2))+
geom_point(mapping=aes(x=2,y=4))+
xlim(0,3)+ylim(0,5)+
geom_abline(slope = 2)
a <- seq(1:100)+rnorm(n = 100)
b <- seq(1:100)+rnorm(n=100)
cor_data <- data.frame(a,b)
cor_data
ggplot(cor_data,aes(x=a,y=b))+
geom_point()
cor.test(a ~ b,data = cor_data)
cor.test(formula=a ~ b,data = cor_data)
cor.test(cor_data$a, cor_data$b)
a <- seq(1:100)+rnorm(n = 100,sd=2)
b <- seq(1:100)+rnorm(n=100,sd = 2)
cor_data <- data.frame(a,b)
ggplot(cor_data,aes(x=a,y=b))+
geom_point()
a <- seq(1:100)+rnorm(n = 100,sd=3)
b <- seq(1:100)+rnorm(n=100,sd=3)
cor_data <- data.frame(a,b)
ggplot(cor_data,aes(x=a,y=b))+
geom_point()
cor.test(cor_data$a, cor_data$b)
set.seed(2600)
a <- seq(1:100)+rnorm(n=100,sd=3)
b <- seq(1:100)+rnorm(n=100,sd=3)
cor_data <- data.frame(a,b)
cor_data
ggplot(cor_data,aes(x=a,y=b))+
geom_point()
cor.test(cor_data$a,cor_data$b)
log(2)
log(log(2))
log(log(2)base = 2)
log(log(2),base = 2)
3
log(3)
log(log(3))
library(magrittr)
library(ggplot2)
library(dplyr)
worldbank_df <- read.csv("data/API_SH.MED.PHYS.ZS_DS2_en_csv_v2_10227587.csv",
header = T,skip = 3)
colnames(worldbank_df)[1] <- "Country"
worldbank_df$n_docs <- sapply(split(worldbank_df[,53:62], #lists of values
seq(nrow(worldbank_df))),
function(x) tail(x[!is.na(x)],1)) %>% #ultimos valores n√£o nulos
as.numeric
who_df <- read.csv("data/who_lifeexpect.csv",skip=2)
who_df$hale <- who_df$X2016
uni_df <- left_join(worldbank_df[,c("Country","n_docs")],
who_df[,c("Country","hale")],by="Country")
ggplot(uni_df,aes(x=n_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
xlab("No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggsave(filename = "images/chap2-logcurve.png",type="cairo-png",dpi = 300,units = "cm",height=13,width = 18)
uni_df$log_docs <- log(uni_df$n_docs)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggsave(filename = "images/chap2-logtransf.png",type="cairo-png",dpi = 300,units = "cm",height=13,width = 18)
View(uni_df)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=66.0,x=0.61626614,lebel="Brasil")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=66.0,x=0.61626614,label="Brasil")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=66.0,x=0.61626614,label="Brasil",color="light red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=66.0,x=0.61626614,label="Brasil",color="light pink")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=63.0,x=0.61626614,label="Brasil",color="light pink")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=63.0,x=0.61626614,label="Brasil",color="pink")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=64.5,x=0.61626614,label="Brasil",color="dark red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=64.5,x=0.61626614,label="Brasil",color="dark red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
geom_text(y=71.5,x=0.61626614,label="Canada",color="dark blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=64.5,x=0.61626614,label="Brasil",color="dark red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
geom_text(y=71.5,x=0.93177030,label="Canada",color="dark blue")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=64.5,x=0.61626614,label="Brasil",color="dark red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
geom_text(y=71.5,x=0.93177030,label="Canada",color="dark blue")+
geom_smooth(stat="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
?geom_smooth
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_point(y=66.0,x=0.61626614,color="red")+
geom_text(y=64.5,x=0.61626614,label="Brasil",color="dark red")+
geom_point(y=73.2,x=0.93177030,color="blue")+
geom_text(y=71.5,x=0.93177030,label="Canada",color="dark blue")+
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggsave(filename = "images/chap2-bras-can-line.png",type="cairo-png",dpi = 300,units = "cm",height=13,width = 18)
set.seed(2600)
library(magrittr)
library(ggplot2)
library(dplyr)
worldbank_df <- read.csv("data/API_SH.MED.PHYS.ZS_DS2_en_csv_v2_10227587.csv",
header = T,skip = 3)
colnames(worldbank_df)[1] <- "Country"
worldbank_df$n_docs <- sapply(split(worldbank_df[,53:62], #lists of values
seq(nrow(worldbank_df))),
function(x) tail(x[!is.na(x)],1)) %>% #ultimos valores n√£o nulos
as.numeric
who_df <- read.csv("data/who_lifeexpect.csv",skip=2)
who_df$hale <- who_df$X2016
uni_df <- left_join(worldbank_df[,c("Country","n_docs")],
who_df[,c("Country","hale")],by="Country")
ggplot(uni_df,aes(x=n_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
xlab("No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$log_docs <- log(uni_df$n_docs)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
cor.test(uni_df$log_docs,uni_df$hale)
uni_df$log_docs <- log(uni_df$n_docs)
lm(log_docs ~ hale, data=uni_df) %>% summary
lm(log_docs ~ hale, data=uni_df)
lm(hale ~log_docs, data=uni_df)
lm(hale ~ log_docs, data=uni_df)
lm(hale ~ log_docs, data=uni_df) %>% summary
lm(hale ~ scale(log_docs), data=uni_df) %>% summary
log(2)
log(2) * 3.73
View(uni_df)
log(1.852) * 3.73
(log(1.852) * 3.73)+64.46
0.841*0.841
predict(lm(log_docs ~ hale, data=uni_df))
predict(lm(log_docs ~ hale, data=uni_df),newdata = data.frame(hale=60,log_docs_=2))
doc_lmfit <- lm(log_docs ~ hale, data=uni_df)
predict(doc_lmfit,newdata = data.frame(hale=60,log_docs_=2))
predict(doc_lmfit,newdata = data.frame(hale=60,log_docs_=2))
head(predict(doc_lmfit))
predict(doc_lmfit,newdata = data.frame(hale=60,log_docs=2))
>lm(hale ~ log_docs, data=uni_df) %>% summary
lm(hale ~ log_docs, data=uni_df) %>% summary
doc_lmfit <- lm(hale ~ log_docs, data=uni_df)
head(predict(doc_lmfit))
predict(doc_lmfit,newdata = data.frame(hale=60,log_docs=2))
predict(doc_lmfit,newdata = data.frame(log_docs=2))
exp(2)
predict(doc_lmfit,newdata = data.frame(log_docs=1))
exp(1)
log(2.718282)
log(1.5)
predict(doc_lmfit,newdata = data.frame(log_docs=log(1.5)))
uni_df$preds <- predict(doc_lmfit)
uni_df$preds[complete.cases(uni_df)] <- predict(doc_lmfit)
ggplot(uni_df, aes(x = log_docs, y = hale)) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_point() +
geom_point(aes(y = preds), shape = 1)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(hale))) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(hale)),color="red") +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(uni_df$hale)),color="red") +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
$ geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(uni_df$hale)),color="red") +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
$ geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(uni_df$hale)),color="red") +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
# geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = mean(uni_df$hale)),color="red") +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$doc_mean <- mean(uni_df$n_docs)
uni_df$doc_mean <- mean(uni_df$)
uni_df$doc_mean <- mean(uni_df$hale)
ggplot(uni_df, aes(x = log_docs, y = hale)) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_point() +
geom_point(aes(y = preds), shape = 1)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$hale_mean <- mean(uni_df$hale)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
#  geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$hale_mean <- mean(uni_df$hale)
uni_df$hale_mean
uni_df$hale_mean[complete.cases(uni_df)] <- mean(uni_df$hale)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$hale_mean
uni_df$hale_mean[complete.cases(uni_df)] <- mean(uni_df$hale,na.rm = T)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
uni_df$hale_mean
mean(uni_df$hale,na.rm = T)
uni_df$hale_mean[complete.cases(uni_df)] <- mean(uni_df$hale,na.rm = T)
uni_df$hale_mean<- mean(uni_df$hale,na.rm = T)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
p_preds <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
p_preds
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = hale_mean)
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = hale_mean)+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = 63.28165)+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")
ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = 63.28165)+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("TSS")
ssr_preds <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("SSR")
source("aux/multiplot.R")
ssr_res <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("SSR")
tss_res <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = 63.28165)+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("TSS")
multiplot(ssr_res,tss_res)
ssr_res <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = preds)) +
geom_smooth(method="lm")+
xlab("")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("SSR")
tss_res <- ggplot(uni_df,aes(x=log_docs,y=hale))+
geom_point(alpha=0.5,size=3) +
geom_segment(aes(xend = log_docs, yend = hale_mean)) +
geom_abline(slope = 0,intercept = 63.28165)+
xlab("ln de No. de medicos / 1,000 hab.")+
ylab("Expectativa de vida saudavel ao nascer")+
ggplot2::ggtitle("TSS")
multiplot(ssr_res,tss_res)
ggsave("images/chap2-residuals.png",type="cairo-png",units="cm",height = 18,width = 22,dpi=300)
